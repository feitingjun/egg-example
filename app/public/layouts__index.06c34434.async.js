(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],{Bo2q:function(e,a,t){e.exports=t.p+"static/11.07389a43.jpg"},NkSf:function(e,a,t){e.exports={spin:"spin___26sTi"}},OBs9:function(e,a,t){e.exports={container:"container___1eOgs",logo:"logo___3E_Je",logoImg:"logoImg___eqUeY",header:"header___2_8PJ",trigger:"trigger___1VSHp",content:"content___38spm",usernameBox:"usernameBox___3dSox",headBox:"headBox___30qqU"}},U5qA:function(e,a,t){e.exports={login:"login___1mzhK",content:"content___3ySBr",title:"title___2NHgh",form:"form___29SRT",btn:"btn___2tLKd"}},Z87C:function(e,a,t){e.exports=t.p+"static/22.2b7c192f.jpg"},aArQ:function(e,a,t){"use strict";t.r(a);var n=t("ZZRV"),r=t.n(n),l=t("9kvl"),s=(t("wDBG"),t("XzeG")),c=(t("4Ifz"),t("NXo6")),o=(t("/aw+"),t("Fw2y")),m=(t("W31w"),t("klrm")),i=t("svyS"),p=t("vbXO"),u=t("CSih"),h=t("U5qA"),d=t.n(h),g=m["a"].Item;class E extends r.a.Component{constructor(){super(...arguments),this.formRef=r.a.createRef(),this.state={},this.handleSubmit=()=>{this.formRef.current.validateFields().then(e=>{this.props.dispatch({type:"user/login",payload:{username:e.username,password:e.password}}).then(a=>{a&&(e.remember?localStorage.setItem("_r",JSON.stringify(e)):localStorage.setItem("_r",null),l["a"].push({pathname:"/"}))})})}}componentDidMount(){this.props.dispatch({type:"user/save"});var e=localStorage.getItem("_r")&&JSON.parse(localStorage.getItem("_r"))||{};this.formRef.current.setFieldsValue(e)}render(){return r.a.createElement("div",{className:d.a.login},r.a.createElement("div",{className:d.a.content},r.a.createElement("div",{className:d.a.title},"\u540e\u53f0\u7cfb\u7edf"),r.a.createElement(m["a"],{ref:this.formRef,className:d.a.form,onFinish:this.handleSubmit},r.a.createElement(g,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{pattern:/^[a-zA-Z]{1}([a-zA-Z0-9]|[._]){4,19}$/,message:"\u7528\u6237\u540d\u683c\u5f0f\u9519\u8bef"}]},r.a.createElement(o["a"],{prefix:r.a.createElement(p["a"],{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"})),r.a.createElement(g,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"},{}]},r.a.createElement(o["a"],{prefix:r.a.createElement(u["a"],{style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"})),r.a.createElement(g,{name:"remember",valuePropName:"checked"},r.a.createElement(c["a"],null,"\u8bb0\u4f4f\u5bc6\u7801")),r.a.createElement(s["a"],{size:"large",className:d.a.btn,type:"primary",htmlType:"submit"},"\u767b\u5f55"))))}}var _=Object(i["c"])()(E),f=(t("2zgg"),t("j0+E")),y=(t("OzU/"),t("O5QV")),v=(t("FaM1"),t("0iVO")),N=t("DndG"),b=t("q5+0"),k=t("c/20"),w=t("uyEY"),x=t("OBs9"),S=t.n(x),O=t("Bo2q"),I=t.n(O),C=t("Z87C"),B=t.n(C),q=v["a"].Header,z=v["a"].Sider,j=v["a"].Content,R=y["a"].SubMenu;class J extends r.a.Component{constructor(){super(...arguments),this.state={collapsed:!1},this.toggle=()=>{this.setState({collapsed:!this.state.collapsed})},this.getMenu=e=>{var a=[];return e.map((e,n)=>{if(e.children&&e.children.length>0){var l=t("rCvz")[e.icon];a.push(r.a.createElement(R,{title:r.a.createElement("span",null,e.icon&&r.a.createElement(l,null),r.a.createElement("span",null,e.name)),key:e.route,className:"home-menuitem"},this.getMenu(e.children)))}else{var s=t("rCvz")[e.icon];a.push(r.a.createElement(y["a"].Item,{key:e.route},r.a.createElement(N["a"],{to:e.route},e.icon&&r.a.createElement(s,null),r.a.createElement("span",null,e.name))))}}),a},this.switchTheme=()=>{var e=window.umi_plugin_ant_themeVar||[],a=e.map((e,a)=>r.a.createElement(y["a"].Item,{key:e.key,onClick:()=>{var a=document.getElementById("theme-style"),t=document.getElementsByTagName("body")[0];a||(a=document.createElement("link"),a.type="text/css",a.rel="stylesheet",a.id="theme-style",t.append(a)),a.href="/theme/".concat(e.fileName),t.className="body-wrap-".concat(e.key),localStorage.setItem("theme",e.key)}},e.name));return a}}render(){var e=this.props.user,a=e.userInfo.username,t=e.menuList,n=r.a.createElement(y["a"],{mode:"vertical"},r.a.createElement(y["a"].Item,null,"\u4fee\u6539\u5bc6\u7801"),r.a.createElement(R,{title:"\u5207\u6362\u4e3b\u9898"},this.switchTheme()),r.a.createElement(y["a"].Item,{onClick:()=>{l["a"].push("/login")}},"\u9000\u51fa\u767b\u5f55")),s=this.props.location.pathname,c=[],o=(e,a)=>{e.map(e=>{e.children&&e.children.length>0?o(e.children,[...a,e.route]):e.route===s&&(c=a)})};return o(t,[]),r.a.createElement(v["a"],{className:S.a.container},r.a.createElement(z,{trigger:null,collapsible:!0,collapsed:this.state.collapsed},r.a.createElement("div",{className:S.a.logo},r.a.createElement("img",{className:S.a.logoImg,src:I.a,alt:""}),!this.state.collapsed&&r.a.createElement("span",null,"\u540e\u53f0\u7ba1\u7406")),t&&r.a.createElement(y["a"],{theme:"dark",mode:"inline",selectedKeys:[s],defaultOpenKeys:c},this.getMenu(t))),r.a.createElement(v["a"],null,r.a.createElement(q,{className:S.a.header},this.state.collapsed?r.a.createElement(k["a"],{className:S.a.trigger,onClick:this.toggle}):r.a.createElement(w["a"],{className:S.a.trigger,onClick:this.toggle}),r.a.createElement(f["a"],{overlayClassName:S.a.dropdown,getPopupContainer:e=>e.parentNode,overlay:n,placement:"bottomCenter"},r.a.createElement("div",{className:S.a.usernameBox},r.a.createElement("span",{className:S.a.headBox},r.a.createElement("img",{src:B.a,alt:""})),r.a.createElement("span",null,a)))),r.a.createElement(j,{className:S.a.content},this.props.children)))}}var M=e=>{var a=e.user.user;return{user:a}},T=Object(b["n"])(Object(i["c"])(M)(J)),V=(t("ae+k"),t("Ps3K")),Z=t("NkSf"),A=t.n(Z),F=Object(i["c"])()(e=>(e.dispatch({type:"user/info"}),r.a.createElement("div",{className:A.a.spin},r.a.createElement(V["a"],null))));a["default"]=Object(i["c"])(e=>{var a=e.user,t=a.user,n=a.isLogin;return{user:t,isLogin:n}})(e=>{var a=e.children,t=e.location,n=e.isLogin,s=e.user;if(!s&&!n&&-1===t.pathname.indexOf("/login"))return l["a"].push("/login"),r.a.createElement(_,null);if(!s&&-1===t.pathname.indexOf("/login"))return r.a.createElement(F,null);var c=-1===t.pathname.indexOf("/login")?T:_;return r.a.createElement(c,null,a)})}}]);